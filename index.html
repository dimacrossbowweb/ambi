<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + TS</title>

	<style>

		html,body {

			margin: 0;
			padding: 0;

			background-color: #333333;

		}

		.card {

			display: flex;
			flex-direction: column;
			gap: 16px;

			border-radius: 15px;
			overflow: hidden;

			box-shadow: 2px 2px 8px #111;

			padding: 25px;

			background-color: black;

		}

		.avatar {

			width: 100px;
			height: 100px;

			border-radius: 100%;

		}

		#app {

			width: 100%;
			height: 100vh;

			display: flex;
			justify-content: center;
			align-items: center;

			transition: backgroundColor .3s ease-in-out;

		}

	</style>
	
</head>
  <body>
    <div id="app">
      
	  <ambi-box
	  
		onupdate="onupdate"
		id="ambi"
		target="video"
		light-to="video"
		radius="300"
		
	>

		<video 

			id="video"
			class="video"
			src="/free.mp4"
			height="200"
			width="200"
			style="border-radius: 100%; object-fit: cover;"
			autoplay
			loop

		></video>

	  </ambi-box>

    </div>
    <script type="module">
		import { AmbiBox } from './src/components/ambi-box.ts';
		import { Color } from './src/entities/color.ts';

		function onupdate ( e ) {

			console.log( e );

			document.body.style.backgroundColor = e.detail.data.averageColor;

		}

		// document.getElementById( 'ambi' ).addEventListener( 'update', ( data ) => {

		// 	console.log( 'Доброе утро, последний герой' );
		// 	console.log( data );

		// } );

	</script>

	<script>

		function onupdate ( e ) {

			const color = `rgba(${ e.detail.data.averageColor.r }, ${e.detail.data.averageColor.g}, ${e.detail.data.averageColor.b}, ${e.detail.data.averageColor.a})`;

			document.getElementById( 'avatar' ).style.backgroundColor = color;

		}

	</script>
  </body>
</html>
